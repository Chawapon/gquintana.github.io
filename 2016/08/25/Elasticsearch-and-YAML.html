<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Elasticsearch and YAML</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://gquintana.github.io/favicon.ico">

    <link rel="stylesheet" type="text/css" href="//gquintana.github.io/themes/casper/assets/css/screen.css?v=1473284273295" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />

    <link rel="canonical" href="https://gquintana.github.io/2016/08/25/Elasticsearch-and-YAML.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="JRald" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Elasticsearch and YAML" />
    <meta property="og:description" content="Most examples in Elasticsearch documentation are using JSON to represent documents, requests and responses. Writing JSON is not that hard but you sometimes become Raiders of the Lost Curly Brace. Do you know that you can replace JSON by YAML? In responses You can add format&#x3D;yaml in the query" />
    <meta property="og:url" content="https://gquintana.github.io/2016/08/25/Elasticsearch-and-YAML.html" />
    <meta property="article:tag" content="elasticsearch" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Elasticsearch and YAML" />
    <meta name="twitter:description" content="Most examples in Elasticsearch documentation are using JSON to represent documents, requests and responses. Writing JSON is not that hard but you sometimes become Raiders of the Lost Curly Brace. Do you know that you can replace JSON by YAML? In responses You can add format&#x3D;yaml in the query" />
    <meta name="twitter:url" content="https://gquintana.github.io/2016/08/25/Elasticsearch-and-YAML.html" />
    
    <script type="application/ld+json">
null
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="JRald" href="https://gquintana.github.io/rss/" />
</head>
<body class="post-template tag-elasticsearch nav-closed">

    

    <div class="site-wrapper">

        


<header class="main-header post-head " style="background-image: url(images/logos/elasticsearch.png)">
    <nav class="main-nav overlay clearfix">
        
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-elasticsearch">

        <header class="post-header">
            <h1 class="post-title">Elasticsearch and YAML</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2016-08-25">25 August 2016</time>  on <a href="https://gquintana.github.io/tag/elasticsearch/">elasticsearch</a>
            </section>
        </header>

        <section class="post-content">
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Most examples in Elasticsearch documentation are using JSON to represent documents, requests and responses.
Writing JSON is not that hard but you sometimes become Raiders of the Lost Curly Brace.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://upload.wikimedia.org/wikipedia/en/4/4c/Raiders_of_the_Lost_Ark.jpg" alt="Raiders of the Lost Ark">
</div>
</div>
<div class="paragraph">
<p>Do you know that you can replace JSON by YAML?</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_in_responses">In responses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can add <code>format=yaml</code> in the query params:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -XGET http://localhost:9200/logstash-*/_search?format=yaml

---
took: 13
timed_out: false
_shards:
  total: 15
  successful: 15
  failed: 0
hits:
  total: 2382
  max_score: 1.0
  hits:
  - _index: "logstash-2016.06.22"
    _type: "test"
    _id: "AVV36B3vd6qInGJw3x0r"
    _score: 1.0
    _source:
      '@timestamp': "2016-06-22T11:39:07.431Z"
  - _index: "logstash-2016.06.22"
    _type: "test"
    _id: "AVV36Cfrd6qInGJw3x0u"
    _score: 1.0
    _source:
      '@timestamp': "2016-06-22T11:38:42.000Z"</pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code>Content-Type: application/yaml</code> HTTP header:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -XGET -H "Content-Type: application/yaml" http://localhost:9200/_cluster/health

---
cluster_name: "elasticsearch"
status: "yellow"
timed_out: false
number_of_nodes: 1
number_of_data_nodes: 1
...</pre>
</div>
</div>
<div class="paragraph">
<p>While using YAML format for responses you don&#8217;t have to use the <code>pretty=true</code> query param,
as YAML is naturally indented and human readable.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_in_requests">In requests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Just start your request body with <code>---</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -XPOST http://localhost:9200/_search -d '---
query:
  match:
    message: "Elasticsearch"
'</pre>
</div>
</div>
<div class="paragraph">
<p>This gets pretty handy when dealing with mappings and settings:</p>
</div>
<div class="listingblock">
<div class="title">movie.mapping.yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">---
properties:
  title:
    type: string
  tags:
    type: string
    index: not_analyzed
  year:
    type: date
    format: year</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -XPUT http://localhost:9200/movies/_mappings/movie --data-binary @movie.mapping.yaml</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_limits">Limits</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some requests like <code>_bulk</code> request may not accept YAML.</p>
</div>
<div class="paragraph">
<p>Sense (Kibana Console) and other Elasticsearch UIs do not handle YAML properly.</p>
</div>
</div>
</div>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="https://gquintana.github.io/author/gquintana/" style="background-image: url(https://avatars.githubusercontent.com/u/755587?v&#x3D;3)"><span class="hidden">Gerald Quintana's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="https://gquintana.github.io/author/gquintana/">Gerald Quintana</a></h4>

                    <p>Read <a href="https://gquintana.github.io/author/gquintana/">more posts</a> by this author.</p>
                <div class="author-meta">
                    <span class="author-location icon-location">Lyon, France</span>
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=Elasticsearch%20and%20YAML&amp;url=https://gquintana.github.io/2016/08/25/Elasticsearch-and-YAML.html"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://gquintana.github.io/2016/08/25/Elasticsearch-and-YAML.html"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://gquintana.github.io/2016/08/25/Elasticsearch-and-YAML.html"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>


    </article>

</main>

<aside class="read-next">
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="https://gquintana.github.io">JRald</a> &copy; 2016</section>
            <section class="poweredby">Proudly published with <a href="http://hubpress.io">HubPress</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>

    <script type="text/javascript" src="//gquintana.github.io/themes/casper/assets/js/jquery.fitvids.js?v=1473284273295"></script>
    <script type="text/javascript" src="//gquintana.github.io/themes/casper/assets/js/index.js?v=1473284273295"></script>

</body>
</html>
