<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Elasticsearch and YAML</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://gquintana.github.io/favicon.ico">

    <script type="text/javascript" src="//gquintana.github.io/themes/ichi/assets/js/vendor/fastclick.js?v=1475787205240"></script>
    <script type="text/javascript" src="//gquintana.github.io/themes/ichi/assets/js/vendor/modernizr.js?v=1475787205240"></script>


    <link rel="stylesheet" type="text/css" href="//gquintana.github.io/themes/ichi/assets/css/normalize.css?v=1475787205240" />
    <link rel="stylesheet" type="text/css" href="//gquintana.github.io/themes/ichi/assets/css/foundation.min.css?v=1475787205240" />
    <!--[if lte IE 8]>
        <link rel="stylesheet" type="text/css" href="//gquintana.github.io/themes/ichi/assets/css/outdatedBrowser.min.css?v=1475787205240">
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="//gquintana.github.io/themes/ichi/assets/fonts/foundation-icons/foundation-icons.css?v=1475787205240" />
    <link rel="stylesheet" type="text/css" href="//gquintana.github.io/themes/ichi/assets/css/styles.css?v=1475787205240" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans:300,700,400|Source+Sans+Pro:300,400,600,700,900,300italic,400italic,600italic,700italic,900italic" />

    <link rel="canonical" href="https://gquintana.github.io/2016/08/25/Elasticsearch-and-YAML.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="JRald" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Elasticsearch and YAML" />
    <meta property="og:description" content="Most examples in Elasticsearch documentation are using JSON to represent documents, requests and responses. Writing JSON is not that hard but you sometimes become Raiders of the Lost Curly Brace. Do you know that you can replace JSON by YAML? In responses You can add format&#x3D;yaml in the query" />
    <meta property="og:url" content="https://gquintana.github.io/2016/08/25/Elasticsearch-and-YAML.html" />
    <meta property="article:tag" content="elasticsearch" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Elasticsearch and YAML" />
    <meta name="twitter:description" content="Most examples in Elasticsearch documentation are using JSON to represent documents, requests and responses. Writing JSON is not that hard but you sometimes become Raiders of the Lost Curly Brace. Do you know that you can replace JSON by YAML? In responses You can add format&#x3D;yaml in the query" />
    <meta name="twitter:url" content="https://gquintana.github.io/2016/08/25/Elasticsearch-and-YAML.html" />
    
    <script type="application/ld+json">
null
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="JRald" href="https://gquintana.github.io/rss/" />
</head>
<body class="post-template tag-elasticsearch">

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdate" href="http://outdatedbrowser.com/">Update my browser now</a></p>
</div>

<nav class="top-bar hide-for-large-up" data-topbar >
  <ul class="title-area">
    <li class="name">

    </li>
    <li class="home"><a class="fi-home" href="https://gquintana.github.io"></a></li>
    <li class="toggle-topbar"><a href="#" id="trigger-overlay" class="fi-list"></a></li>
  </ul>

<div class="overlay overlay-scale">
    <button type="button" class="overlay-close">Close</button>
    <nav>
        <ul>
            <li><a href="https://gquintana.github.io">Home</a></li>
        </ul>
    </nav>
</div>

</nav>

<div class="row">

<div class="small-16 medium-16 large-4 columns right head-area" >

<header class="site-head">
    <div class="vertical">
        <div class="site-head-content inner">
            <ul class="side-nav blog-menu show-for-large-up">
                <li><a class="fi-home" href="https://gquintana.github.io"></a></li>
                <li><a class="fi-torso" href="https://gquintana.github.io/about"></a></li>
                <li><a class="fi-mail" href="https://gquintana.github.io/contact"></a></li>
            </ul>
            
            <h1 class="blog-title">JRald</h1>
            <hr>
            <p class="blog-description">Yet another blog about tech stuff</p>
            <div class="blog-network">
<!--                 <a href="#" class="fi-social-pinterest"></a>
                <a href="#" class="fi-social-linkedin"></a>
                <a href="#" class="fi-social-behance"></a>
                <a href="#" class="fi-social-deviant-art"></a>
                <a href="#" class="fi-social-dribbble"></a>
                <a href="#" class="fi-social-flickr"></a>
                <a href="#" class="fi-social-github"></a>
                <a href="#" class="fi-social-skype"></a>
                <a href="#" class="fi-social-snapchat"></a>
                <a href="#" class="fi-social-steam"></a>
                <a href="#" class="fi-social-xbox"></a>
                <a href="#" class="fi-social-reddit"></a> -->
                  <a href="gquintana" class="fi-social-github"></a>
                  <a href="gerald_quintana" class="fi-social-twitter"></a>
            </div>
        </div>
    </div>
</header>

</div>


<div class="small-16 medium-16 large-12 columns main-column left">
    

<main class="content" role="main">

    <article class="post tag-elasticsearch">


            <h1 class="post-title">Elasticsearch and YAML</h1>

            <span class="post-meta label"><time datetime="2016-08-25">25 Aug 2016</time></span>

            <section class="post-content">
                <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Most examples in Elasticsearch documentation are using JSON to represent documents, requests and responses.
Writing JSON is not that hard but you sometimes become Raiders of the Lost Curly Brace.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://upload.wikimedia.org/wikipedia/en/4/4c/Raiders_of_the_Lost_Ark.jpg" alt="Raiders of the Lost Ark">
</div>
</div>
<div class="paragraph">
<p>Do you know that you can replace JSON by YAML?</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_in_responses">In responses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can add <code>format=yaml</code> in the query params:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -XGET http://localhost:9200/logstash-*/_search?format=yaml

---
took: 13
timed_out: false
_shards:
  total: 15
  successful: 15
  failed: 0
hits:
  total: 2382
  max_score: 1.0
  hits:
  - _index: "logstash-2016.06.22"
    _type: "test"
    _id: "AVV36B3vd6qInGJw3x0r"
    _score: 1.0
    _source:
      '@timestamp': "2016-06-22T11:39:07.431Z"
  - _index: "logstash-2016.06.22"
    _type: "test"
    _id: "AVV36Cfrd6qInGJw3x0u"
    _score: 1.0
    _source:
      '@timestamp': "2016-06-22T11:38:42.000Z"</pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code>Content-Type: application/yaml</code> HTTP header:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -XGET -H "Content-Type: application/yaml" http://localhost:9200/_cluster/health

---
cluster_name: "elasticsearch"
status: "yellow"
timed_out: false
number_of_nodes: 1
number_of_data_nodes: 1
...</pre>
</div>
</div>
<div class="paragraph">
<p>While using YAML format for responses you don&#8217;t have to use the <code>pretty=true</code> query param,
as YAML is naturally indented and human readable.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_in_requests">In requests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Just start your request body with <code>---</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -XPOST http://localhost:9200/_search -d '---
query:
  match:
    message: "Elasticsearch"
'</pre>
</div>
</div>
<div class="paragraph">
<p>This gets pretty handy when dealing with mappings and settings:</p>
</div>
<div class="listingblock">
<div class="title">movie.mapping.yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">---
properties:
  title:
    type: string
  tags:
    type: string
    index: not_analyzed
  year:
    type: date
    format: year</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -XPUT http://localhost:9200/movies/_mappings/movie --data-binary @movie.mapping.yaml</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_limits">Limits</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some requests like <code>_bulk</code> request may not accept YAML.</p>
</div>
<div class="paragraph">
<p>Sense (Kibana Console) and other Elasticsearch UIs do not handle YAML properly.</p>
</div>
</div>
</div>
                        <aside class="tags fi-pricetag-multiple">Posted on <a href="https://gquintana.github.io/tag/elasticsearch/">elasticsearch</a></aside>
            </section>
            <hr>
            <footer class="post-footer">

                <section class="share">
                    <h4>Liked this post ? Share it.</h4>
                    <a class="fi-social-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://gquintana.github.io/2016/08/25/Elasticsearch-and-YAML.html"
                        onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    </a>
                    <a class="fi-social-twitter" href="https://twitter.com/share?text=Elasticsearch%20and%20YAML&amp;url=https://gquintana.github.io/2016/08/25/Elasticsearch-and-YAML.html"
                        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    </a>
                    <a class="fi-social-google-plus" href="https://plus.google.com/share?url=https://gquintana.github.io/2016/08/25/Elasticsearch-and-YAML.html"
                       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    </a>
                </section>

                <section class="author">
                    <header>
                        <span>About the author</span>
                    </header>
                    <section>
                        <h4>Gerald Quintana</h4>
                        <img src="https://avatars.githubusercontent.com/u/755587?v&#x3D;3">
                        <span>Lyon, France</span>
                        
                    </section>
                    <footer>
                         <p></p>
                    </footer>
                </section>

        <div class="clearfix"></div>
                    <hr>

            </footer>

        <h3 class="title-disqus"><span class="fi-comments"></span>Discussions</h3>




    </article>

</main>

</div>

</div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>

    <!--[if lte IE 8]>
        <script type="text/javascript" src="//gquintana.github.io/themes/ichi/assets/js/outdatedBrowser.min.js?v=1475787205240"></script>
    <![endif]-->
    <script type="text/javascript" src="//gquintana.github.io/themes/ichi/assets/js/min/built.js?v=1475787205240"></script>

    <script>
      $(document).foundation();
    </script>

</body>
</html>
